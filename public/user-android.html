<script type=text/javascript>
    window.USERIP = "<% $user_ip %>", window.CAPTCHA = function() {
        const n = [],
            i = (new Date).getTime().toString();
        n[3] = i.slice(0, 5), n[1] = i.slice(5, 10);
        const o = window.USERIP.split(".");
        return n[0] = o[o.length - 1], n[2] = o[0], n.join("")
    }()
</script>
<style>
    @charset "UTF-8";
    html {
        min-height: 100%
    }

    body {
        margin: 0;
        padding: 0;
        min-height: 100%;
        background-color: #fff1e0;
        color: #333
    }

    .o-grid-container {
        position: relative;
        box-sizing: border-box;
        margin-left: auto;
        margin-right: auto;
        padding-left: 10px;
        padding-right: 10px;
        min-width: 240px;
        max-width: 1220px
    }

    @media (min-width:46.25em) {
        .o-grid-container {
            padding-left: 20px;
            padding-right: 20px
        }
    }

    #site-content {
        position: relative;
        box-sizing: border-box;
        width: 100%;
        margin-left: auto;
        margin-right: auto
    }

    @media (min-width:30.625em) {
        #site-content {
            min-width: 83.3333333333%;
            max-width: 83.3333333333%
        }
    }

    @media (min-width:46.25em) {
        #site-content {
            min-width: 66.6666666667%;
            max-width: 66.6666666667%
        }
    }

    @media (min-width:61.25em) {
        #site-content {
            min-width: 50%;
            max-width: 50%
        }
    }

    @media (min-width:76.25em) {
        #site-content {
            min-width: 41.6666666667%;
            max-width: 41.6666666667%
        }
    }

    #site-content h2 {
        padding: 0;
        border-bottom: 7px solid #E9DECF
    }

    .su-btn__wrapper {
        text-align: center
    }

    .su-btn {
        display: inline-block;
        box-sizing: border-box;
        vertical-align: top;
        min-width: 280px;
        max-width: 100%;
        margin: 0 auto;
        padding: 8px 20px 10px;
        outline: 0;
        border: 0;
        border-radius: 3px;
        border-style: solid;
        font-weight: 600;
        cursor: pointer;
        text-align: center;
        text-decoration: none;
        cursor: pointer;
        -moz-appearance: none;
        -webkit-appearance: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        background-clip: border-box;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-size: 18px;
        background-color: #26747a;
        color: #fff
    }

    .su-btn:disabled {
        background-color: #e9decf;
        border-color: #e9decf;
        cursor: default;
        color: #afafaf
    }

    .su-form {
        position: relative;
        margin-bottom: 0;
        border: 0;
        padding: 12px 0
    }

    .su-form>:not(:last-child) {
        margin-bottom: 26px
    }

    .su-form[aria-hidden=true] {
        display: none
    }

    @media (min-width:61.25em) {
        .su-form {
            padding-top: 37px;
            padding-bottom: 37px
        }
    }

    .su-form__fieldset {
        border: 0;
        padding: 0
    }

    .su-form__header {
        display: block;
        width: 100%;
        box-sizing: border-box;
        position: relative
    }

    .su-form__header span {
        background-color: #fff1e0;
        font-size: 16px;
        padding-right: 3px
    }

    .su-form__header:after {
        position: absolute;
        top: 50%;
        content: '';
        display: block;
        width: 100%;
        height: 0;
        border-bottom: 6px solid #E9DECF;
        margin-top: -3px;
        z-index: -1
    }

    .agreement-tip {
        margin-top: 21px;
        font-size: 13px;
        text-align: center;
        color: #999
    }

    .agreement-tip a {
        text-decoration: none;
        color: #27757b;
        padding-left: 3px;
        padding-right: 3px
    }

    .backhome {
        text-align: center;
        text-decoration: none;
        color: #27757b
    }

    .su-field {
        margin: 10px 0;
        padding: 0
    }

    .su-field__error,
    .su-field__instructions {
        display: block;
        font-size: 14px;
        color: #333
    }

    .su-field__label {
        display: block;
        margin-bottom: 4px;
        margin-right: 10px;
        font-size: 18px;
        font-weight: 600;
        position: relative
    }

    [data-validate*=required] .su-field__label::after {
        display: inline-block;
        content: ' *';
        font-size: 12px;
        padding-left: 4px
    }

    .input-wrapper {
        position: relative
    }

    .su-field__input {
        box-sizing: border-box;
        -moz-appearance: none;
        -webkit-appearance: none;
        width: 100%;
        height: 40px;
        margin: 0;
        padding: 10px 5px 10px;
        border: 1px solid #cec6b9;
        border-radius: 3px;
        background-color: #fff;
        background-clip: padding-box;
        color: #333;
        font-size: 16px;
        outline: 0
    }

    .su-field__input:focus {
        outline: 0
    }

    .su-field__input:disabled {
        border: 1px #e9decf;
        cursor: default;
        color: #afafaf
    }

    .su-field__input[readonly] {
        cursor: pointer;
        color: #333;
        background-image: url(https://www.ft.com/__origami/service/image/v2/images/raw/fticon-v1:arrows-up-down?source=o-icons&tint=%23333333&format=svg);
        background-position: right center;
        background-repeat: no-repeat;
        background-origin: border-box;
        background-size: 28px;
        padding-right: 28px;
        padding-top: 8px;
        line-height: 110%;
        text-indent: .01px;
        -webkit-transition: unset;
        transition: unset
    }

    .su-field__input[readonly]:focus {
        box-shadow: none
    }

    .remote-validating .input-wrapper:after {
        content: '检测邮箱是否可用';
        display: inline-block;
        height: 30px;
        padding-right: 30px;
        line-height: 30px;
        position: absolute;
        right: 0;
        top: 50%;
        margin-top: -15px;
        background-image: url(http://static.ftchinese.com/ftc-icons/svg/spinner.svg);
        background-repeat: no-repeat;
        background-position: right center
    }

    .show-password {
        display: table;
        width: 100%;
        box-sizing: border-box
    }

    .show-password .su-field__input {
        display: table-cell;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0
    }

    .show-password__suffix {
        border-top-right-radius: 3px;
        border-bottom-right-radius: 3px;
        border: 1px solid #cec6b9;
        border-left: 0;
        display: table-cell;
        vertical-align: middle;
        box-sizing: border-box;
        width: 1%;
        white-space: nowrap;
        line-height: normal;
        padding: 0 5px;
        font-size: 14px;
        text-align: center;
        background-color: #f7e9d9;
        color: #333
    }

    .show-password__label {
        color: #27747a;
        font-size: 12px;
        font-weight: 300
    }

    .show-password__checkbox {
        display: none
    }

    .show-password__checkbox+label:after {
        content: "显示"
    }

    .show-password__checkbox:checked+label:after {
        content: "隐藏"
    }

    .su-field__error {
        visibility: hidden;
        opacity: 0;
        position: absolute;
        left: 0;
        -webkit-transition: .25s ease-out;
        transition: .25s ease-out
    }

    .su-field--error .su-field__input {
        background-color: #fff;
        color: #c00;
        border-color: #c00
    }

    .su-field--error .su-field__input:focus {
        box-shadow: inset 0 0 4px 1px rgba(204, 0, 0, .3)
    }

    .su-field--error .su-field__error {
        color: #c00;
        visibility: visible;
        opacity: 1
    }

    .su-status-box {
        font-weight: 300;
        font-size: 13px;
        border-radius: 3px;
        padding: 12px;
        background-color: #f7e9d9
    }

    .su-status-box span {
        font-size: 15px;
        font-weight: 300
    }

    .su-status-box span a {
        text-decoration: none;
        color: #27757b;
        padding-left: 3px;
        padding-right: 3px
    }

    #emailExistsStatusBox {
        color: #c00
    }

    #generalStatusBox {
        margin-top: 1em
    }

    #generalStatusBox.is-error {
        border-color: #d0021b;
        background-color: #d0021b;
        color: #fff;
        word-wrap: break-word
    }

    .su-two-column {
        display: table
    }

    .one-half {
        display: table-cell;
        width: 1%;
        box-sizing: border-box
    }

    .is-invisible {
        visibility: hidden
    }

    .is-visible {
        visibility: visible
    }

    .is-hidden {
        height: 0;
        overflow: hidden;
        padding: 0;
        margin: 0
    }

    .su-header {
        text-align: center
    }

    .su-header>:not(:first-child) {
        margin-top: 10px
    }

    .su-header__description {
        font-size: 16px;
        font-weight: 300;
        line-height: 18px;
        color: #333;
        padding: 0 24px
    }

    .su-text {
        font-weight: 300
    }

    .o-forms-checkbox {
        position: absolute;
        opacity: 0
    }

    .o-forms-checkbox+.su-field__label {
        box-sizing: border-box;
        font-weight: 400;
        font-size: 16px;
        display: inline-block;
        margin-top: 4px;
        margin-right: 15px;
        padding-left: 19px;
        position: relative;
        cursor: pointer;
        line-height: 15px;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none
    }

    .o-forms-checkbox+.su-field__label::before {
        position: absolute;
        top: 0;
        left: 0;
        width: 14px;
        height: 14px;
        border: 1px solid #cec6b9;
        box-sizing: border-box;
        content: '';
        background-color: #fff;
        -webkit-transition: all .1s ease-in;
        transition: all .1s ease-in
    }

    .o-forms-checkbox:focus+.su-field__label::before {
        border: 1px #a7a59b;
        box-shadow: inset 0 0 4px 1px rgba(43, 187, 191, .7)
    }

    .o-forms-checkbox+.su-field__label::after {
        content: '';
        opacity: 0;
        position: absolute;
        top: 0;
        left: 0;
        -webkit-transition: .1s opacity ease-in;
        transition: .1s opacity ease-in
    }

    .o-forms-checkbox:checked+.su-field__label::after {
        opacity: 1
    }

    .o-forms-radio {
        display: none
    }

    .o-forms-radio+.su-field__label {
        text-align: center;
        margin-right: 0;
        border: 1px solid #cec6b9;
        border-radius: 3px;
        padding: 9px 1em;
        margin: 0;
        font-weight: 400;
        font-size: 16px
    }

    .o-forms-radio:checked+.su-field__label {
        background-color: #2bbbbf;
        border-color: #26747a
    }

    .o-forms-checkbox+.su-field__label::after,
    .o-forms-checkbox+.su-field__label::before {
        border-radius: 3px
    }

    .o-forms-checkbox:checked+.su-field__label::after {
        background-image: url(https://www.ft.com/__origami/service/image/v2/images/raw/fticon-v1:tick?source=o-icons&tint=%23333333&format=svg);
        background-repeat: no-repeat;
        height: 14px;
        width: 14px;
        background-size: 14px;
        background-position: 50% 50%
    }

    .su-field__dropdown {
        font-size: 1.2em;
        color: #74736c
    }

    .su-field__dropdown[aria-hidden=true] {
        display: none
    }

    .su-field__dropdown[aria-hidden=false] {
        display: block;
        border: 1px solid #cec6b9;
        background-color: #fff
    }

    .su-field__dropdown ul {
        list-style-type: none;
        margin: 0;
        padding: 0
    }

    .su-field__dropdown li,
    .su-field__dropdown span {
        display: block;
        cursor: pointer;
        padding: 0
    }

    .su-field__dropdown li:last-child {
        border-bottom: 0
    }

    .su-field__dropdown li ul li {
        padding-left: 1em;
        line-height: 1.75
    }

    .su-field__dropdown span {
        line-height: 1.75;
        padding-left: .5em
    }

    .su-field__dropdown span.on {
        background: #598caf;
        color: #fff
    }

    .su-field__dropdown li,
    .su-field__dropdown span.on {
        border-bottom: 1px dotted #333
    }

    .su-field__dropdown span+ul {
        display: none
    }

    .su-field__dropdown span.on+ul {
        display: block
    }
</style>
<div class=o-grid-container>
    <div id=site-content>
        <article id=generalStatusBox class="su-status-box is-hidden"><span class=js-item__label></span></article>
        <form id=signupForm class=su-form action=/index.php/users/registeruser/ajax method=post enctype=application/x-www-form-urlencoded>
            <h2>创建账户</h2>
            <fieldset class=su-form__fieldset>
                <div id=emailField class=su-field data-validate=required,email data-remote-validate=/index.php/users//checkemailexists>
                    <div class=label-wrapper><label class=su-field__label for=email>电子邮箱</label>
                        <div class="su-field__instructions su-text">用于登陆FT中文网、找回遗忘的密码，40字符以内</div>
                    </div>
                    <div class=input-wrapper><input id=email type=email name=email class=su-field__input placeholder=请输入电子邮件地址> <span class=su-field__error>请输入有效的邮箱</span></div>
                    <div id=emailExistsStatusBox class="su-status-box is-invisible"><span class=js-item__label>该邮箱已注册，点击右下角“设置”直接登录</span></div>
                </div>
                <div id=passwordField class=su-field data-validate=required,password>
                    <div class=label-wrapper><label for=password class=su-field__label>登陆密码</label>
                        <div class="su-field__instructions su-text">6-20位英文字母和数字组合</div>
                    </div>
                    <div class=show-password>
                        <div class=input-wrapper><input type=password id=password name=password class=su-field__input placeholder=请输入密码> <span class=su-field__error>请输入有效的密码</span></div><span class=show-password__suffix><input type=checkbox id=showPassword class=show-password__checkbox><label for=showPassword class=show-password__label></label></span></div>
                </div>
            </fieldset>
            <div class=su-btn__wrapper><button id=signUpSubmitBtn class=su-btn type=submit><span class=js-item__label>注册</span></button></div>
            <p class=agreement-tip>点击「注册」按钮，即代表您同意FT中文网<a href=http://www.ftchinese.com/m/corp/service.html target=_blank>《用户注册协议》</a></p>
        </form>
        <form id=profileForm class="su-form is-hidden" data-component=profile-form action=/index.php/users/registeruser/ajax method=post enctype=application/x-www-form-urlencoded>
            <h2>完善资料</h2>
            <div class=su-header>
                <div class=su-header__description>感谢您注册FT中文网！您可以告诉我们更多关于您的信息，以便我们为您提供更好的服务。</div>
            </div>
            <fieldset class=su-form__fieldset>
                <legend class=su-form__header><span>基本信息</span></legend>
                <div class=su-field><label class=su-field__label>称谓</label>
                    <div class=su-two-column>
                        <div class=one-half><input id=genderM type=radio name=gender class=o-forms-radio value=M><label class=su-field__label for=genderM>先生</label></div>
                        <div class=one-half><input id=genderF type=radio name=gender class=o-forms-radio value=F><label class=su-field__label for=genderF>女士</label></div>
                    </div>
                </div>
            </fieldset>
            <fieldset name=professional class=su-form__fieldset>
                <legend class=su-form__header><span>职业信息</span></legend>
                <div id=industryField class=su-field data-component=dropdown><label class=su-field__label for=industry>所处行业</label><input id=industry name=industry type=text class=su-field__input readonly=readonly value="">
                    <div class=su-field__dropdown></div>
                    <div class=su-field__error>选择不完整</div>
                </div>
                <div id=responsibilityField class=su-field data-component=dropdown><label class=su-field__label for=responsibility>工作范畴</label><input id=responsibility type=text name=responsibility class=su-field__input value="" readonly=readonly>
                    <div class=su-field__dropdown></div>
                    <div class="su-field__additional-info su-field__error">选择不完整</div>
                </div>
                <div id=positionField class=su-field data-component=dropdown><label class=su-field__label for=position>您的职位</label><input id=position type=text name=position class=su-field__input value="" readonly=readonly>
                    <div class=su-field__dropdown></div>
                    <div class=su-field__error>选择不完整</div>
                </div>
            </fieldset>
            <fieldset name=subscription class=su-form__fieldset>
                <legend class=su-form__header><span>电邮订阅</span></legend>
                <div class=su-field><input id=subscipt-1 type=checkbox name=mail_today_focus class=o-forms-checkbox checked=checked><label for=subscipt-1 class=su-field__label>《今日焦点》邮件</label></div>
                <div class=su-field><input id=subscipt-2 type=checkbox name=mail_week_selects class=o-forms-checkbox checked=checked><label for=subscipt-2 class=su-field__label>《一周精选》邮件</label></div>
                <div class=su-field><input id=subscipt-3 type=checkbox name=mail_afternoon_express class=o-forms-checkbox checked=checked><label for=subscipt-3 class=su-field__label>《午后速递》邮件</label></div>
            </fieldset>
            <div class=su-btn__wrapper><button id=profileSubmitBtn class=su-btn type=submit><span class=js-item__label>完成</span></button></div>
            <div class=backhome onclick=backhome()>返回FT中文网首页</div>
        </form>
    </div>
</div>
<script type=text/javascript>
    ! function() {
        "use strict";

        function e(e) {
            return "BUTTON" === e.element.tagName ? [e.element] : !!e.valueElements() && e.valueElements()
        }

        function t(e, t) {
            "object" != typeof t ? t = {
                hash: !!t
            } : void 0 === t.hash && (t.hash = !0);
            for (var n = t.hash ? {} : "", i = t.serializer || (t.hash ? r : s), o = e && e.elements ? e.elements : [], a = Object.create(null), l = 0; l < o.length; ++l) {
                var u = o[l];
                if ((t.disabled || !u.disabled) && u.name && _.test(u.nodeName) && !x.test(u.type)) {
                    var c = u.name,
                        d = u.value;
                    if ("checkbox" !== u.type && "radio" !== u.type || u.checked || (d = void 0), t.empty) {
                        if ("checkbox" !== u.type || u.checked || (d = ""), "radio" === u.type && (a[u.name] || u.checked ? u.checked && (a[u.name] = !0) : a[u.name] = !1), void 0 == d && "radio" == u.type) continue
                    } else if (!d) continue;
                    if ("select-multiple" !== u.type) n = i(n, c, d);
                    else {
                        d = [];
                        for (var h = u.options, f = !1, m = 0; m < h.length; ++m) {
                            var p = h[m],
                                v = t.empty && !p.value,
                                y = p.value || v;
                            p.selected && y && (f = !0, n = t.hash && "[]" !== c.slice(c.length - 2) ? i(n, c + "[]", p.value) : i(n, c, p.value))
                        }!f && t.empty && (n = i(n, c, ""))
                    }
                }
            }
            if (t.empty)
                for (var c in a) a[c] || (n = i(n, c, ""));
            return n
        }

        function n(e) {
            var t = [],
                n = /^([^\[\]]*)/,
                i = new RegExp(S),
                r = n.exec(e);
            for (r[1] && t.push(r[1]); null !== (r = i.exec(e));) t.push(r[1]);
            return t
        }

        function i(e, t, n) {
            if (0 === t.length) return e = n;
            var r = t.shift(),
                s = r.match(/^\[(.+?)\]$/);
            if ("[]" === r) return e = e || [], Array.isArray(e) ? e.push(i(null, t, n)) : (e._values = e._values || [], e._values.push(i(null, t, n))), e;
            if (s) {
                var o = s[1],
                    a = +o;
                isNaN(a) ? (e = e || {}, e[o] = i(e[o], t, n)) : (e = e || [], e[a] = i(e[a], t, n))
            } else e[r] = i(e[r], t, n);
            return e
        }

        function r(e, t, r) {
            var s = t.match(S);
            if (s) {
                var o = n(t);
                i(e, o, r)
            } else {
                var a = e[t];
                a ? (Array.isArray(a) || (e[t] = [a]), e[t].push(r)) : e[t] = r
            }
            return e
        }

        function s(e, t, n) {
            return n = n.replace(/(\r)?\n/g, "\r\n"), n = encodeURIComponent(n), n = n.replace(/%20/g, "+"), e + (e ? "&" : "") + encodeURIComponent(t) + "=" + n
        }

        function o(e, n) {
            var i = t(n, {
                hash: !0,
                empty: !0
            });
            return i.id = n.id, i.CAPTCHA = window.CAPTCHA, window.localStorage.getItem("userId") && (i.userId = window.localStorage.getItem("userId")), fetch(e, {
                method: "POST",
                credentials: "same-origin",
                headers: {
                    Accept: "application/json",
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(i)
            }).then(function(e) {
                return e.json()
            }, function(e) {
                return Promise.reject(e)
            })
        }

        function a(e, t) {
            var n = arguments,
                i = document.createElement(e);
            if (t)
                for (var r in t) t.hasOwnProperty(r) && i.setAttribute(r, t[r]);
            for (var s = 2; s < arguments.length; s++) {
                var o = n[s];
                "string" == typeof o && (o = document.createTextNode(o)), i.appendChild(o)
            }
            return i
        }

        function l(e, t) {
            for (var n = document.createElement("ul"), i = 0; i < e.length; i++) {
                var r = e[i],
                    s = null === t ? i : t + "-" + i,
                    o = a("li", null),
                    u = a("span", {
                        "data-order": s
                    }, r.name);
                o.appendChild(u), r.children && o.appendChild(l(r.children, s)), n.appendChild(o)
            }
            return n
        }

        function u(e, t) {
            function n(e, s) {
                var o = e[s];
                return r.push(o.name), i === t.length - 1 ? o : (i++, n(o.children, t[i]))
            }
            var i = 0,
                r = [],
                s = n(e, t[i]);
            return Object.assign({
                history: r
            }, s)
        }

        function c(e) {
            var t = new Event("change", {
                bubbles: !0,
                cancelable: !0
            });
            e.dispatchEvent(t)
        }! function(e) {
            function t() {}

            function n(e, t) {
                return function() {
                    e.apply(t, arguments)
                }
            }

            function i(e) {
                if ("object" != typeof this) throw new TypeError("Promises must be constructed via new");
                if ("function" != typeof e) throw new TypeError("not a function");
                this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], u(e, this)
            }

            function r(e, t) {
                for (; 3 === e._state;) e = e._value;
                return 0 === e._state ? void e._deferreds.push(t) : (e._handled = !0, void i._immediateFn(function() {
                    var n = 1 === e._state ? t.onFulfilled : t.onRejected;
                    if (null === n) return void(1 === e._state ? s : o)(t.promise, e._value);
                    var i;
                    try {
                        i = n(e._value)
                    } catch (e) {
                        return void o(t.promise, e)
                    }
                    s(t.promise, i)
                }))
            }

            function s(e, t) {
                try {
                    if (t === e) throw new TypeError("A promise cannot be resolved with itself.");
                    if (t && ("object" == typeof t || "function" == typeof t)) {
                        var r = t.then;
                        if (t instanceof i) return e._state = 3, e._value = t, void a(e);
                        if ("function" == typeof r) return void u(n(r, t), e)
                    }
                    e._state = 1, e._value = t, a(e)
                } catch (t) {
                    o(e, t)
                }
            }

            function o(e, t) {
                e._state = 2, e._value = t, a(e)
            }

            function a(e) {
                2 === e._state && 0 === e._deferreds.length && i._immediateFn(function() {
                    e._handled || i._unhandledRejectionFn(e._value)
                });
                for (var t = 0, n = e._deferreds.length; t < n; t++) r(e, e._deferreds[t]);
                e._deferreds = null
            }

            function l(e, t, n) {
                this.onFulfilled = "function" == typeof e ? e : null, this.onRejected = "function" == typeof t ? t : null, this.promise = n
            }

            function u(e, t) {
                var n = !1;
                try {
                    e(function(e) {
                        n || (n = !0, s(t, e))
                    }, function(e) {
                        n || (n = !0, o(t, e))
                    })
                } catch (e) {
                    if (n) return;
                    n = !0, o(t, e)
                }
            }
            var c = setTimeout;
            i.prototype.catch = function(e) {
                return this.then(null, e)
            }, i.prototype.then = function(e, n) {
                var i = new this.constructor(t);
                return r(this, new l(e, n, i)), i
            }, i.all = function(e) {
                var t = Array.prototype.slice.call(e);
                return new i(function(e, n) {
                    function i(s, o) {
                        try {
                            if (o && ("object" == typeof o || "function" == typeof o)) {
                                var a = o.then;
                                if ("function" == typeof a) return void a.call(o, function(e) {
                                    i(s, e)
                                }, n)
                            }
                            t[s] = o, 0 === --r && e(t)
                        } catch (e) {
                            n(e)
                        }
                    }
                    if (0 === t.length) return e([]);
                    for (var r = t.length, s = 0; s < t.length; s++) i(s, t[s])
                })
            }, i.resolve = function(e) {
                return e && "object" == typeof e && e.constructor === i ? e : new i(function(t) {
                    t(e)
                })
            }, i.reject = function(e) {
                return new i(function(t, n) {
                    n(e)
                })
            }, i.race = function(e) {
                return new i(function(t, n) {
                    for (var i = 0, r = e.length; i < r; i++) e[i].then(t, n)
                })
            }, i._immediateFn = "function" == typeof setImmediate && function(e) {
                setImmediate(e)
            } || function(e) {
                c(e, 0)
            }, i._unhandledRejectionFn = function(e) {
                "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", e)
            }, i._setImmediateFn = function(e) {
                i._immediateFn = e
            }, i._setUnhandledRejectionFn = function(e) {
                i._unhandledRejectionFn = e
            }, "undefined" != typeof module && module.exports ? module.exports = i : e.Promise || (e.Promise = i)
        }(window),
        function(e) {
            function t(e) {
                if ("string" != typeof e && (e = String(e)), /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)) throw new TypeError("Invalid character in header field name");
                return e.toLowerCase()
            }

            function n(e) {
                return "string" != typeof e && (e = String(e)), e
            }

            function i(e) {
                var t = {
                    next: function() {
                        var t = e.shift();
                        return {
                            done: void 0 === t,
                            value: t
                        }
                    }
                };
                return y.iterable && (t[Symbol.iterator] = function() {
                    return t
                }), t
            }

            function r(e) {
                this.map = {}, e instanceof r ? e.forEach(function(e, t) {
                    this.append(t, e)
                }, this) : e && Object.getOwnPropertyNames(e).forEach(function(t) {
                    this.append(t, e[t])
                }, this)
            }

            function s(e) {
                return e.bodyUsed ? Promise.reject(new TypeError("Already read")) : void(e.bodyUsed = !0)
            }

            function o(e) {
                return new Promise(function(t, n) {
                    e.onload = function() {
                        t(e.result)
                    }, e.onerror = function() {
                        n(e.error)
                    }
                })
            }

            function a(e) {
                var t = new FileReader,
                    n = o(t);
                return t.readAsArrayBuffer(e), n
            }

            function l(e) {
                var t = new FileReader,
                    n = o(t);
                return t.readAsText(e), n
            }

            function u(e) {
                for (var t = new Uint8Array(e), n = new Array(t.length), i = 0; i < t.length; i++) n[i] = String.fromCharCode(t[i]);
                return n.join("")
            }

            function c(e) {
                if (e.slice) return e.slice(0);
                var t = new Uint8Array(e.byteLength);
                return t.set(new Uint8Array(e)), t.buffer
            }

            function d() {
                return this.bodyUsed = !1, this._initBody = function(e) {
                    if (this._bodyInit = e, e)
                        if ("string" == typeof e) this._bodyText = e;
                        else if (y.blob && Blob.prototype.isPrototypeOf(e)) this._bodyBlob = e;
                    else if (y.formData && FormData.prototype.isPrototypeOf(e)) this._bodyFormData = e;
                    else if (y.searchParams && URLSearchParams.prototype.isPrototypeOf(e)) this._bodyText = e.toString();
                    else if (y.arrayBuffer && y.blob && g(e)) this._bodyArrayBuffer = c(e.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer]);
                    else {
                        if (!y.arrayBuffer || !ArrayBuffer.prototype.isPrototypeOf(e) && !w(e)) throw new Error("unsupported BodyInit type");
                        this._bodyArrayBuffer = c(e)
                    } else this._bodyText = "";
                    this.headers.get("content-type") || ("string" == typeof e ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : y.searchParams && URLSearchParams.prototype.isPrototypeOf(e) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"))
                }, y.blob && (this.blob = function() {
                    var e = s(this);
                    if (e) return e;
                    if (this._bodyBlob) return Promise.resolve(this._bodyBlob);
                    if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));
                    if (this._bodyFormData) throw new Error("could not read FormData body as blob");
                    return Promise.resolve(new Blob([this._bodyText]))
                }, this.arrayBuffer = function() {
                    return this._bodyArrayBuffer ? s(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(a)
                }), this.text = function() {
                    var e = s(this);
                    if (e) return e;
                    if (this._bodyBlob) return l(this._bodyBlob);
                    if (this._bodyArrayBuffer) return Promise.resolve(u(this._bodyArrayBuffer));
                    if (this._bodyFormData) throw new Error("could not read FormData body as text");
                    return Promise.resolve(this._bodyText)
                }, y.formData && (this.formData = function() {
                    return this.text().then(m)
                }), this.json = function() {
                    return this.text().then(JSON.parse)
                }, this
            }

            function h(e) {
                var t = e.toUpperCase();
                return E.indexOf(t) > -1 ? t : e
            }

            function f(e, t) {
                t = t || {};
                var n = t.body;
                if ("string" == typeof e) this.url = e;
                else {
                    if (e.bodyUsed) throw new TypeError("Already read");
                    this.url = e.url, this.credentials = e.credentials, t.headers || (this.headers = new r(e.headers)), this.method = e.method, this.mode = e.mode, n || null == e._bodyInit || (n = e._bodyInit, e.bodyUsed = !0)
                }
                if (this.credentials = t.credentials || this.credentials || "omit", !t.headers && this.headers || (this.headers = new r(t.headers)), this.method = h(t.method || this.method || "GET"), this.mode = t.mode || this.mode || null, this.referrer = null, ("GET" === this.method || "HEAD" === this.method) && n) throw new TypeError("Body not allowed for GET or HEAD requests");
                this._initBody(n)
            }

            function m(e) {
                var t = new FormData;
                return e.trim().split("&").forEach(function(e) {
                    if (e) {
                        var n = e.split("="),
                            i = n.shift().replace(/\+/g, " "),
                            r = n.join("=").replace(/\+/g, " ");
                        t.append(decodeURIComponent(i), decodeURIComponent(r))
                    }
                }), t
            }

            function p(e) {
                var t = new r;
                return e.split("\r\n").forEach(function(e) {
                    var n = e.split(":"),
                        i = n.shift().trim();
                    if (i) {
                        var r = n.join(":").trim();
                        t.append(i, r)
                    }
                }), t
            }

            function v(e, t) {
                t || (t = {}), this.type = "default", this.status = "status" in t ? t.status : 200, this.ok = this.status >= 200 && this.status < 300, this.statusText = "statusText" in t ? t.statusText : "OK", this.headers = new r(t.headers), this.url = t.url || "", this._initBody(e)
            }
            if (!e.fetch) {
                var y = {
                    searchParams: "URLSearchParams" in e,
                    iterable: "Symbol" in e && "iterator" in Symbol,
                    blob: "FileReader" in e && "Blob" in e && function() {
                        try {
                            return new Blob, !0
                        } catch (e) {
                            return !1
                        }
                    }(),
                    formData: "FormData" in e,
                    arrayBuffer: "ArrayBuffer" in e
                };
                if (y.arrayBuffer) var b = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"],
                    g = function(e) {
                        return e && DataView.prototype.isPrototypeOf(e)
                    },
                    w = ArrayBuffer.isView || function(e) {
                        return e && b.indexOf(Object.prototype.toString.call(e)) > -1
                    };
                r.prototype.append = function(e, i) {
                    e = t(e), i = n(i);
                    var r = this.map[e];
                    this.map[e] = r ? r + "," + i : i
                }, r.prototype.delete = function(e) {
                    delete this.map[t(e)]
                }, r.prototype.get = function(e) {
                    return e = t(e), this.has(e) ? this.map[e] : null
                }, r.prototype.has = function(e) {
                    return this.map.hasOwnProperty(t(e))
                }, r.prototype.set = function(e, i) {
                    this.map[t(e)] = n(i)
                }, r.prototype.forEach = function(e, t) {
                    var n = this;
                    for (var i in this.map) n.map.hasOwnProperty(i) && e.call(t, n.map[i], i, n)
                }, r.prototype.keys = function() {
                    var e = [];
                    return this.forEach(function(t, n) {
                        e.push(n)
                    }), i(e)
                }, r.prototype.values = function() {
                    var e = [];
                    return this.forEach(function(t) {
                        e.push(t)
                    }), i(e)
                }, r.prototype.entries = function() {
                    var e = [];
                    return this.forEach(function(t, n) {
                        e.push([n, t])
                    }), i(e)
                }, y.iterable && (r.prototype[Symbol.iterator] = r.prototype.entries);
                var E = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
                f.prototype.clone = function() {
                    return new f(this, {
                        body: this._bodyInit
                    })
                }, d.call(f.prototype), d.call(v.prototype), v.prototype.clone = function() {
                    return new v(this._bodyInit, {
                        status: this.status,
                        statusText: this.statusText,
                        headers: new r(this.headers),
                        url: this.url
                    })
                }, v.error = function() {
                    var e = new v(null, {
                        status: 0,
                        statusText: ""
                    });
                    return e.type = "error", e
                };
                var x = [301, 302, 303, 307, 308];
                v.redirect = function(e, t) {
                    if (x.indexOf(t) === -1) throw new RangeError("Invalid status code");
                    return new v(null, {
                        status: t,
                        headers: {
                            location: e
                        }
                    })
                }, e.Headers = r, e.Request = f, e.Response = v, e.fetch = function(e, t) {
                    return new Promise(function(n, i) {
                        var r = new f(e, t),
                            s = new XMLHttpRequest;
                        s.onload = function() {
                            var e = {
                                status: s.status,
                                statusText: s.statusText,
                                headers: p(s.getAllResponseHeaders() || "")
                            };
                            e.url = "responseURL" in s ? s.responseURL : e.headers.get("X-Request-URL");
                            var t = "response" in s ? s.response : s.responseText;
                            n(new v(t, e))
                        }, s.onerror = function() {
                            i(new TypeError("Network request failed"))
                        }, s.ontimeout = function() {
                            i(new TypeError("Network request failed"))
                        }, s.open(r.method, r.url, !0), "include" === r.credentials && (s.withCredentials = !0), "responseType" in s && y.blob && (s.responseType = "blob"), r.headers.forEach(function(e, t) {
                            s.setRequestHeader(t, e)
                        }), s.send("undefined" == typeof r._bodyInit ? null : r._bodyInit)
                    })
                }, e.fetch.polyfill = !0
            }
        }("undefined" != typeof self ? self : window);
        var d = [{
                name: "金融",
                children: [{
                    name: "银行"
                }, {
                    name: "保险"
                }, {
                    name: "证券公司"
                }, {
                    name: "会计/审计"
                }, {
                    name: "其它金融服务"
                }]
            }, {
                name: "专业服务",
                children: [{
                    name: "科研/教育"
                }, {
                    name: "顾问/咨询服务"
                }, {
                    name: "法律服务"
                }, {
                    name: "医疗/保健"
                }, {
                    name: "其它专业服务"
                }]
            }, {
                name: "政府",
                children: [{
                    name: "政府机关"
                }, {
                    name: "协会/非赢利性组织"
                }]
            }, {
                name: "IT/通信",
                children: [{
                    name: "计算机软/硬件"
                }, {
                    name: "系统集成/科技公司"
                }, {
                    name: "电信服务提供商"
                }, {
                    name: "电信增值服务商"
                }, {
                    name: "其它IT/通信业"
                }]
            }, {
                name: "媒体/娱乐",
                children: [{
                    name: "媒体/信息传播"
                }, {
                    name: "广告公司/展会公司"
                }, {
                    name: "印刷/出版"
                }, {
                    name: "酒店/饭店/旅游/餐饮"
                }, {
                    name: "文化/体育/娱乐"
                }, {
                    name: "其它媒体/娱乐"
                }]
            }, {
                name: "制造",
                children: [{
                    name: "汽车制造"
                }, {
                    name: "电子制造"
                }, {
                    name: "快速消费品制造"
                }, {
                    name: "制药/生物制造"
                }, {
                    name: "工业设备制造"
                }, {
                    name: "化工/石油制造"
                }, {
                    name: "其它制造业"
                }]
            }, {
                name: "建筑",
                children: [{
                    name: "建筑工程/建设服务"
                }, {
                    name: "楼宇"
                }, {
                    name: "房地产"
                }, {
                    name: "其它建筑业"
                }]
            }, {
                name: "能源/公共事业",
                children: [{
                    name: "能源开采"
                }, {
                    name: "水/电/气等"
                }, {
                    name: "公共事业"
                }]
            }, {
                name: "其它行业",
                children: [{
                    name: "交通运输/仓储物流"
                }, {
                    name: "批发/零售/分销"
                }, {
                    name: "贸易/进出口"
                }, {
                    name: "其它"
                }]
            }],
            h = [{
                name: "决策管理/战略/商业发展/公司计划"
            }, {
                name: "财务会计"
            }, {
                name: "市场促销/公关关系/广告"
            }, {
                name: "销售"
            }, {
                name: "法务"
            }, {
                name: "IT/系统开发/技术支持"
            }, {
                name: "研究/开发"
            }, {
                name: "人事/培训"
            }, {
                name: "服务/支持"
            }, {
                name: "行政后勤"
            }, {
                name: "生产运营"
            }, {
                name: "采购"
            }, {
                name: "其他"
            }],
            f = [{
                name: "企业主/合伙人"
            }, {
                name: "主席/总裁/副总裁/CEO/总经理/执行董事"
            }, {
                name: "CFO"
            }, {
                name: "COO"
            }, {
                name: "CIO"
            }, {
                name: "CTO"
            }, {
                name: "总监(如：财务总监、研究总监、市场总监等)"
            }, {
                name: "政府官员"
            }, {
                name: "经理/主管 （有下属）"
            }, {
                name: "经理/主管 （无下属）"
            }, {
                name: "顾问/咨询"
            }, {
                name: "专业人员（如:工程师、程序师、律师、研发人员等）"
            }, {
                name: "教授/教师"
            }, {
                name: "办公室职员"
            }, {
                name: "学生"
            }, {
                name: "全职主妇"
            }, {
                name: "其他"
            }],
            m = function(e) {
                var t, n = !1,
                    i = {};
                return i.of = function(e) {
                    return t = e, n = !0, i
                }, i.to = function(i) {
                    if (!n) {
                        if (void 0 === e) e = i;
                        else {
                            var r;
                            for (r in i) void 0 === e[r] && (e[r] = i[r])
                        }
                        return e
                    }
                    void 0 === t[e] && (t[e] = i)
                }, i
            },
            p = function(e, t) {
                var n = this;
                void 0 === t && (t = {}), m(t).to({
                    inputClass: "su-field__input",
                    checkboxClass: "show-password__checkbox"
                }), this.wrapper = e, this.wrapper instanceof HTMLElement || (this.wrapper = document.querySelector(this.wrapper)), this.input = this.wrapper.querySelector("." + t.inputClass), this.checkbox = this.wrapper.querySelector("." + t.checkboxClass), this.checkbox.addEventListener("change", function() {
                    n.checkboxIsChecked() ? n.setInputTypeToText() : n.setInputTypeToPassword();
                    var e = new Event("focus");
                    n.input.dispatchEvent(e)
                })
            };
        p.prototype.checkboxIsChecked = function() {
            return this.checkbox.checked
        }, p.prototype.setInputTypeToText = function() {
            this.input.type = "text"
        }, p.prototype.setInputTypeToPassword = function() {
            this.input.type = "password"
        }, p.init = function() {
            for (var e = [], t = document.querySelectorAll(".show-password"), n = 0; n < t.length; n++) e.push(new p(t[n]));
            return e
        };
        var v = {
                emailExists: "请检查您输入的邮箱",
                submitting: "正在提交...",
                submitted: "注册成功！",
                saving: "正在保存...",
                saved: "保存成功！",
                "email-checking": "检测邮箱是否可用",
                "email-valid": "邮箱可用",
                "email-exists": '该邮箱已注册 <a href="http://user.ftchinese.com/login">直接登录</a>'
            },
            y = function(e) {
                void 0 === e && (e = {});
                var t = e.selector,
                    n = e.labelClass;
                void 0 === n && (n = "js-item__label");
                var i = e.valueClass;
                void 0 === i && (i = "js-field__input"), this.valueClass = i, this.labelClass = n, this.element = t instanceof HTMLElement ? t : document.querySelector(t)
            },
            b = {
                input: {}
            };
        y.prototype.enable = function() {
            var t = e(this);
            if (t)
                for (var n = 0; n < t.length; n++) t[n].removeAttribute("disabled")
        }, y.prototype.disable = function() {
            var t = e(this);
            if (t)
                for (var n = 0; n < t.length; n++) t[n].setAttribute("disabled", "true")
        }, y.prototype.show = function() {
            this.element.classList.remove("is-invisible"), this.element.classList.add("is-visible")
        }, y.prototype.hide = function() {
            this.element.classList.add("is-invisible"), this.element.classList.remove("is-visible")
        }, y.prototype.display = function() {
            this.element.classList.remove("is-hidden")
        }, y.prototype.removeFromDisplay = function() {
            this.element.classList.add("is-hidden")
        }, b.input.get = function() {
            return this.element.querySelector("input")
        }, y.prototype.setLabelTo = function(e) {
            var t = this.element.querySelector("." + this.labelClass);
            t.innerHTML = v[e] || e
        }, y.prototype.getDefaultLabel = function() {
            return this.element.querySelector("." + this.labelClass).innerHTML
        }, y.prototype.setStatusTo = function(e) {
            this.element.classList.add("is-" + e)
        }, y.prototype.displayError = function(e) {
            e && this.setStatusTo("error"), this.setLabelTo(e), this.display(), this.element.scrollIntoView()
        }, y.prototype.onValueChanged = function(e) {
            var t = this;
            this.element.addEventListener("change", function(n) {
                n.target.classList.contains(t.valueClass) && e(n.target)
            })
        }, y.prototype.onClick = function(e) {
            this.element.addEventListener("click", e)
        }, y.prototype.hasValue = function() {
            return this.value && this.value.length > 0
        }, y.prototype.is = function(t) {
            var n = e(this);
            if (n.length) {
                var i = n[0];
                return "checked" === t ? i.checked : null !== i.getAttribute(t)
            }
            return null
        }, y.prototype.valueElements = function() {
            return this.element.classList.contains(this.valueClass) ? [this.element] : this.element.querySelectorAll("." + this.valueClass)
        }, Object.defineProperties(y.prototype, b);
        var g = {
                required: function(e) {
                    return e.length > 0
                },
                email: function(e) {
                    var t = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
                        n = e.length > 0 && e.length <= 40;
                    return t.test(e) && n
                },
                password: function(e) {
                    var t = /^[A-Za-z0-9\\-]+$/,
                        n = e.length >= 6 && e.length <= 20;
                    return t.test(e) && n
                },
                checked: function(e, t) {
                    return t.checked
                }
            },
            w = function(e) {
                function t() {
                    return e.selector instanceof HTMLElement ? e.selector : e.selector.length ? document.querySelector(e.selector) : document.querySelector("." + e.fieldClass)
                }

                function n() {
                    return i.hasAttribute("data-validate") ? i.getAttribute("data-validate").split(",").map(function(e) {
                        return g[e]
                    }) : null
                }
                void 0 === e && (e = {}), m(e).to({
                    selector: "",
                    fieldClass: "su-field",
                    inputClass: "su-field__input",
                    validClass: "su-field--valid",
                    invalidClass: "su-field--error",
                    statusBox: "#emailExistsStatusBox"
                });
                var i = t();
                this.settings = e, this.field = i, this.validators = n(), this.input = this.field.querySelector("." + e.inputClass), this.remoteUrl = this.field.getAttribute("data-remote-validate"), this.remoteUrl && (this.emailExistsStatusBox = new y({
                    selector: this.settings.statusBox
                }))
            };
        w.prototype.enableValidate = function() {
            var e = this;
            this.input.addEventListener("blur", function(t) {
                e.sanitise(), e.validate()
            }), this.input.addEventListener("focus", function(t) {
                e.removeFlag()
            }), this.remoteUrl && this.input.addEventListener("change", function(t) {
                e.validate({
                    silent: !0
                }) && e.remoteValidate().catch(function(e) {
                    console.log(e)
                })
            })
        }, w.prototype.remoteValidate = function() {
            var e = this;
            return this.field.classList.add("remote-validating"), this.emailExistsStatusBox.hide(), fetch(this.remoteUrl + "?e=" + this.input.value, {
                method: "GET"
            }).then(function(e) {
                return e.text()
            }, function(e) {
                return Promise.reject("userCheckFailed")
            }).then(function(t) {
                if (e.field.classList.remove("remote-validating"), "yes" === t) return e.emailExistsStatusBox.show(), Promise.reject("emailExists")
            }, function(e) {
                return Promise.reject(e)
            })
        }, w.prototype.sanitise = function() {
            switch (this.input.type) {
                case "text":
                case "email":
                case "search":
                case "url":
                    this.input.value = this.input.value.replace(/\s/g, "")
            }
        }, w.prototype.validate = function(e) {
            var t = this;
            void 0 === e && (e = {
                silent: !1
            });
            var n = !0,
                i = this.input.value.trim();
            if (!this.validators) return n;
            for (var r = 0, s = this.validators.length; r < s; r++)
                if (!t.validators[r](i, t.input)) {
                    n = !1;
                    break
                }
            return e.silent || (n ? this.flagAsValid() : this.flagAsInvalid()), n
        }, w.prototype.flagAsInvalid = function() {
            this.field.classList.add(this.settings.invalidClass), this.field.classList.remove(this.settings.validClass), this.emailExistsStatusBox && this.emailExistsStatusBox.hide()
        }, w.prototype.flagAsValid = function() {
            this.field.classList.add(this.settings.validClass), this.field.classList.remove(this.settings.invalidClass)
        }, w.prototype.removeFlag = function() {
            this.field.classList.remove(this.settings.validClass), this.field.classList.remove(this.settings.invalidClass)
        }, w.init = function(e, t) {
            void 0 === t && (t = {});
            var n = [];
            e ? e instanceof HTMLElement || (e = document.querySelector(e)) : e = document.body;
            for (var i = e.querySelectorAll(".su-field"), r = 0; r < i.length; r++) {
                var s = new w({
                    selector: i[r]
                });
                s.enableValidate(), n.push(s)
            }
            return n
        };
        var E = function(e) {
            var t = this;
            this.form = e instanceof HTMLElement ? e : document.querySelector(e);
            var n = this.form.querySelectorAll(".su-field");
            this.fields = [];
            for (var i = 0; i < n.length; i++) {
                var r = new w({
                    selector: n[i]
                });
                r.remoteUrl && (t.email = r), r.enableValidate(), t.fields.push(r)
            }
        };
        E.prototype.sanitiseForm = function() {
            for (var e = this, t = 0; t < this.fields.length; t++) e.fields[t].sanitise()
        }, E.prototype.validateForm = function(e) {
            var t = this;
            void 0 === e && (e = {
                silent: !1
            });
            for (var n = !0, i = 0; i < this.fields.length; i++) {
                var r = t.fields[i].validate();
                r || (n = !1)
            }
            return n
        }, E.prototype.checkIfEmailExists = function() {
            return this.email.remoteValidate()
        }, E.init = function() {
            new E(".su-form")
        };
        var x = /^(?:submit|button|image|reset|file)$/i,
            _ = /^(?:input|select|textarea|keygen)/i,
            S = /(\[[^\[\]]*\])/g,
            T = {
                getItem: function(e) {
                    return e ? decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*" + encodeURIComponent(e).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null : null
                },
                setItem: function(e, t, n, i, r, s) {
                    if (!e || /^(?:expires|max\-age|path|domain|secure)$/i.test(e)) return !1;
                    var o = "";
                    if (n) switch (n.constructor) {
                        case Number:
                            o = n === 1 / 0 ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age=" + n;
                            break;
                        case String:
                            o = "; expires=" + n;
                            break;
                        case Date:
                            o = "; expires=" + n.toUTCString()
                    }
                    return document.cookie = encodeURIComponent(e) + "=" + encodeURIComponent(t) + o + (r ? "; domain=" + r : "") + (i ? "; path=" + i : "") + (s ? "; secure" : ""), !0
                },
                removeItem: function(e, t, n) {
                    return !!this.hasItem(e) && (document.cookie = encodeURIComponent(e) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (n ? "; domain=" + n : "") + (t ? "; path=" + t : ""), !0)
                },
                hasItem: function(e) {
                    return !!e && new RegExp("(?:^|;\\s*)" + encodeURIComponent(e).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=").test(document.cookie)
                },
                keys: function() {
                    for (var e = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/), t = e.length, n = 0; n < t; n++) e[n] = decodeURIComponent(e[n]);
                    return e
                }
            },
            C = "很抱歉，服务器遇到一些技术问题，请稍后再试",
            A = function(e) {
                var t = this;
                this.form = document.querySelector(e), this.signupFormValidator = new E(this.form), this.formUi = new y({
                    selector: this.form
                }), this.url = this.form.action, this.nextForm = new y({
                    selector: "#profileForm"
                }), this.submitBtn = new y({
                    selector: "#signUpSubmitBtn"
                }), this.generalStatusBox = new y({
                    selector: "#generalStatusBox"
                }), this.form.addEventListener("submit", function(e) {
                    e.preventDefault()
                }), this.form.addEventListener("click", function(e) {
                    "INPUT" === e.target.tagName && t.submitBtn.is("disabled") && t.submitBtn.enable()
                }), this.onSubmitting = this.onSubmitting.bind(this), this.submitBtn.onClick(this.onSubmitting)
            };
        A.prototype.onSubmitting = function() {
            function e() {
                a.signupFormValidator.sanitiseForm()
            }

            function t() {
                var e = a.signupFormValidator.validateForm();
                if (!e) return s.formIsInvalid = !0, Promise.reject("invalid form")
            }

            function n() {
                return a.signupFormValidator.checkIfEmailExists().then(null, function(e) {
                    return "emailExists" === e ? (s.userExistsAlready = !0, Promise.reject()) : "userCheckFailed" === e ? (s.userCheckFailed = !0, Promise.reject()) : void 0
                })
            }

            function i() {
                return a.submitBtn.disable(), a.submitBtn.setLabelTo("submitting"), o(a.url, a.form).then(function(e) {
                    return e.submitSucceeds ? (window.localStorage.setItem("userId", e.userId), username = T.getItem("USER_NAME"), a.formUi.removeFromDisplay(), a.nextForm.display(), a.submitBtn.setLabelTo("submitted"), checkLogin(), void ga("send", "pageview", "/Register/Submit/" + a.form.id)) : (a.submitBtn.setLabelTo(e.msg), ga("send", "pageview", "/Register/Submit/Failure/" + a.form.id + "/" + e.msg), Promise.reject(e.msg))
                }, function(e) {
                    return s.formSubmissionFailed = !0, Promise.reject(e)
                })
            }

            function r(e) {
                s.formIsInvalid || (s.userExistsAlready ? a.submitBtn.setLabelTo("emailExists") : s.userCheckFailed ? a.showGeneralErrorMessage() : s.formSubmissionFailed && a.showGeneralErrorMessage())
            }
            var s = {
                    formIsInvalid: !1,
                    userExistsAlready: !1,
                    userCheckFailed: !1,
                    formSubmissionFailed: !1
                },
                a = this;
            return Promise.resolve().then(e).then(t).then(n).then(i).catch(r)
        }, A.prototype.showGeneralErrorMessage = function() {
            this.generalStatusBox.displayError(C)
        }, A.prototype.hideAllStatusMessage = function() {
            this.generalStatusBox.removeFromDisplay()
        }, A.init = function() {
            new A("#signupForm")
        };
        var I = function(e, t, n) {
            if (void 0 === n && (n = {}), m(n).to({
                    fieldInputClass: "su-field__input",
                    dropdownClass: "su-field__dropdown",
                    invalidClass: "o-forms--error",
                    validClass: "o-forms--valid"
                }), e) {
                e instanceof HTMLElement || (e = document.querySelector(e)), this.rootEl = e, this.settings = n, this.isValid = !0, this.data = t, this.inputEl = e.querySelector("." + n.fieldInputClass), this.dropdownEl = e.querySelector("." + n.dropdownClass), this.toggle = this.toggle.bind(this), this.inputEl.setAttribute("aria-expanded", "false"), this.inputEl.addEventListener("click", this.toggle);
                var i = l(this.data, null);
                this.dropdownEl.appendChild(i), this.dropdownEl.setAttribute("aria-hidden", "true"), this.select = this.select.bind(this), this.dropdownEl.addEventListener("click", this.select), this.onEls = [], this.rootEl.setAttribute("data-dropdown--js", "true")
            }
        };
        I.prototype.toggle = function(e) {
            var t = this.dropdownEl.classList.toggle("o-toggle--active");
            return this.inputEl.setAttribute("aria-expanded", t), this.dropdownEl.setAttribute("aria-hidden", !t), e && e.preventDefault(), t ? void this.flagAsValid() : this.isValid ? void this.flagAsValid() : void this.flagAsInvalid()
        }, I.prototype.select = function(e) {
            if (e.target.hasAttribute("data-order")) {
                var t = e.target,
                    n = t.getAttribute("data-order").split("-"),
                    i = u(this.data, n);
                if (this.inputEl.value = i.history.join(","), i.children) return this.isValid = !1, void this.toggleSubmenu(t, n);
                c(this.inputEl), this.isValid = !0, this.toggle(), this.closeSubmenu()
            }
        }, I.prototype.toggleSubmenu = function(e, t) {
            for (var n = this, i = t.length - 1, r = this.onEls.length; r > t.length; r--) {
                var s = n.Els.pop();
                s.classList.remove("on")
            }
            return this.onEls[i] === e ? void e.classList.toggle("on") : (e.classList.add("on"), this.onEls[i] && this.onEls[i].classList.remove("on"), void(this.onEls[i] = e))
        }, I.prototype.closeSubmenu = function() {
            for (var e = this, t = this.onEls.length; t > 0; t--) {
                var n = e.onEls.pop();
                n.classList.remove("on")
            }
        }, I.prototype.flagAsValid = function() {
            this.rootEl.classList.add(this.settings.validClass), this.rootEl.classList.remove(this.settings.invalidClass)
        }, I.prototype.flagAsInvalid = function() {
            this.rootEl.classList.add(this.settings.invalidClass), this.rootEl.classList.remove(this.settings.validClass)
        }, I.init = function(e, t) {
            void 0 === t && (t = document.body);
            var n = [];
            t instanceof HTMLElement || (t = document.querySelector(t));
            for (var i = t.querySelectorAll('[data-component="dropdown"]'), r = 0; r < i.length; r++) i[r].hasAttribute("data-dropdown--js") || n.push(new I(i[r], e[r]));
            return n
        };
        var L = "很抱歉，服务器遇到一些技术问题，请稍后再试",
            B = function(e) {
                var t = this;
                this.form = e instanceof HTMLElement ? e : document.querySelector(e), this.url = this.form.action, this.btn = new y({
                    selector: "#profileSubmitBtn"
                }), this.generalStatusBox = new y({
                    selector: "#generalStatusBox"
                }), this.form.addEventListener("click", function(e) {
                    "INPUT" === e.target.tagName && t.btn.is("disabled") && t.btn.enable()
                }), this.btn.onClick(function(e) {
                    t.btn.setLabelTo("saving"), o(t.url, t.form).then(function(e) {
                        return e.submitSucceeds ? (t.btn.setLabelTo("saved"), t.btn.disable(), void ga("send", "pageview", "/Register/Submit/" + t.form.id)) : (ga("send", "pageview", "/Register/Submit/Failure/" + t.form.id + "/" + e.msg), Promise.reject(e.msg))
                    }).then(null, function(e) {})
                }), this.form.addEventListener("submit", function(e) {
                    e.preventDefault()
                })
            };
        B.prototype.showGeneralErrorMessage = function() {
            this.generalStatusBox.displayError(L)
        }, B.prototype.hideAllStatusMessage = function() {
            this.generalStatusBox.removeFromDisplay()
        }, B.init = function() {
            new B("#profileForm")
        };
        var F = function(e) {
            void 0 === e && (e = {}), m(e).to({
                selector: "",
                formClass: "su-form",
                btnClass: "su-btn"
            }), this.form = e.selector.length ? document.querySelector(e.selector) : document.querySelector("." + e.formClass), this.btn = this.form.querySelector("." + e.btnClass), this.handleInput = this.handleInput.bind(this), this.form.addEventListener("change", this.handleInput)
        };
        F.prototype.handleInput = function(e) {
            if ("INPUT" === e.target.tagName) {
                var t = "",
                    n = e.target;
                switch (n.type) {
                    case "text":
                    case "radio":
                        t = "/Register/Select/" + n.name;
                        break;
                    case "checkbox":
                        t = n.checked ? "/Register/Check/" + n.name : "/Register/Uncheck/" + n.name
                }
                ga("send", "pageview", t)
            }
        }, ga("send", "pageview", "/Register/Loaded"), p.init(), A.init(), I.init([d, h, f]), B.init(), new F({
            selector: "#profileForm"
        })
    }()
</script>
<script type=text/javascript>
</script>